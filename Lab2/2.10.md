```c++
#include <stdio.h>

int main() {
    int N_PERIODS, cmdCode, i;
    float initialBalance, PENALTY_FEE, amount;
    float currentBalance;
    float totalPenalties = 0.0;

    if (scanf("%f %f %d", &initialBalance, &PENALTY_FEE, &N_PERIODS) != 3) {
        return 1;
    }
    currentBalance = initialBalance;
    
    printf("starting Balance: %.2f\n", initialBalance);

    for(i = 1; i <= N_PERIODS; i++ ) {
        if (scanf("%d %f", &cmdCode, &amount) != 2) {
            break;
        }
        printf("--- month %d ---\n", i);
        switch (cmdCode) {
        case 1:
            currentBalance += amount;
            printf("Deposit: %.2f\n", amount);
            break;
        case 2:
            if (amount <= 0) {
                printf("Error: Quantity must be positive.\n");
            }
            else if (amount <= currentBalance) {
                currentBalance -= amount;
                printf("WITHDRAWAL %.2f\n", amount);
            }
            else {
                totalPenalties += PENALTY_FEE;
                printf("WITHDRAWAL FAILED. PENALTY %.2f applied.\n", PENALTY_FEE);
            }
            break;
        case 3:
            if (currentBalance < 1000.0) {
                currentBalance += currentBalance * 0.01 / 12.0;
                printf("Interest: %.2f (Rate: 1.0%%)\n",currentBalance * 0.01 / 12.0 );
            } 
            else {
                currentBalance += currentBalance * 0.025 / 12.0;
                printf("Interest: %.2f (Rate: 2.5%%)\n",currentBalance * 0.025 / 12.0 );
            }
            break;
        default:
            printf("Error: Invalid Command.\n");
            break;
        }
    }   

    printf("Final Balance: %.2f\n", currentBalance);
    printf("Total Penalties: %.2f\n", totalPenalties);
    return 0;
}
```
